<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</head>

<body>
    <!-- 加減乘除 -用class做 -->
    <div class="container-fluid mt-5">
        <div class="row mt-3">
            <div class="col">
                <input type="number" class="my-num1 form-control" name="" id="" placeholder="num1?">
            </div>
            <div class="col">
                <input type="number" class="my-num2 form-control" name="" id="" placeholder="num2?">
            </div>
            <div class="col">
                <!-- <input type="text" class="form-control" name="" id="opt" placeholder="option?"> -->
                <select name="" id="" class="my-opt form-select">
                    <option value="1">+</option>
                    <option value="2">-</option>
                    <option value="3">*</option>
                    <option value="4">/</option>
                </select>
            </div>
            <div class="col">
                <div class="d-grid gap-2">
                    <button class="my-btn btn btn-primary" type="button" id="">calBtn</button>
                </div>
            </div>
            <div class="col mt-2">
                <span class="my-result" id="">result...</span>
            </div>
        </div>
    </div>
    <div class="container-fluid mt-5">
        <div class="row mt-3">
            <div class="col">
                <input type="number" class="my-num1 form-control" name="" id="" placeholder="num1?">
            </div>
            <div class="col">
                <input type="number" class="my-num2 form-control" name="" id="" placeholder="num2?">
            </div>
            <div class="col">
                <!-- <input type="text" class="form-control" name="" id="opt" placeholder="option?"> -->
                <select name="" id="" class="my-opt form-select">
                    <option value="1">+</option>
                    <option value="2">-</option>
                    <option value="3">*</option>
                    <option value="4">/</option>
                </select>
            </div>
            <div class="col">
                <div class="d-grid gap-2">
                    <button class="my-btn btn btn-primary" type="button" id="">calBtn</button>
                </div>
            </div>
            <div class="col mt-2">
                <span class="my-result" id="">result...</span>
            </div>
        </div>
    </div>
    <div class="container-fluid mt-5">
        <div class="row mt-3">
            <div class="col">
                <input type="number" class="my-num1 form-control" name="" id="" placeholder="num1?">
            </div>
            <div class="col">
                <input type="number" class="my-num2 form-control" name="" id="" placeholder="num2?">
            </div>
            <div class="col">
                <!-- <input type="text" class="form-control" name="" id="opt" placeholder="option?"> -->
                <select name="" id="" class="my-opt form-select">
                    <option value="1">+</option>
                    <option value="2">-</option>
                    <option value="3">*</option>
                    <option value="4">/</option>
                </select>
            </div>
            <div class="col">
                <div class="d-grid gap-2">
                    <button class="my-btn btn btn-primary" type="button" id="">calBtn</button>
                </div>
            </div>
            <div class="col mt-2">
                <span class="my-result" id="">result...</span>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        // 綁定
        $(document).ready(function () {
            // 綁定class
            const num1 = $('.my-num1')
            const num2 = $('.my-num2')
            const opt = $('.my-opt')
            const myBtn = $('.my-btn')
            const result = $('.my-result')

            // console.log('num1',num1);
            // console.log('num2',num2);
            // console.log('result',result);
            // console.log('choose',choose.val());

            myBtn.click(function () {
                // console.log('this', this);
                // console.log('$(this)', $(this));
                // console.log('$(this).parent()', $(this).parent());
                // console.log('$(this).parent().parent()', $(this).parent().parent());
                // console.log('$(this).parent().parent().parent()', $(this).parent().parent().parent());
                // 從myBtn往上找到最外層的父元素row
                // 再由此往下找要選取的元素
                const nowRow = $(this).parent().parent().parent();
                const nowNum1 = nowRow.find('.my-num1');
                const nowNum2 = nowRow.find('.my-num2');
                const nowOpt = nowRow.find('.my-opt');
                const nowResult = nowRow.find('.my-result');

                console.log('nowNum1', nowNum1);
                console.log('nowNum2', nowNum2);
                console.log('nowOpt', nowOpt);
                console.log('nowResult', nowResult);
                // 從綁定的元素取值，而每一行都是獨立計算不影響，是因為class命名一樣，而從每個點下去的btn的往上找父元素在往下找要選取的值做計算
                let getNum1Value = Number(nowNum1.val());
                let getNum2Value = Number(nowNum2.val());
                let getOptValue = Number(nowOpt.val());
                // console.log('getNum1Value',getNum1Value);
                // console.log('getNum1Value typeof', typeof (getNum1Value));
                if (nowNum1.val().length <= 0 || nowNum2.val().length <= 0) {
                    alert("請輸入值");
                    return;

                }
                if (getNum1Value < 0 || getNum2Value < 0) {
                    alert("請輸入正數");
                    return;
                }
                let result = 0;
                switch (getOptValue) {
                    case 1:
                        result = getNum1Value + getNum2Value;
                        break;
                    case 2:
                        result = getNum1Value - getNum2Value;
                        break;
                    case 3:
                        result = getNum1Value * getNum2Value;
                        break;
                    case 4:
                        if (getNum2Value !== 0) {
                            result = getNum1Value / getNum2Value;
                        } else {
                            alert("除數不為零")
                            return;
                        }
                        break;
                }
                nowResult.text(result);
                console.log(result);

            })

        })
    </script>
</body>

</html>